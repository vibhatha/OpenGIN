"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[16],{5668(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"overview/architecture/api-layer-details","title":"API Layer - Detailed Architecture","description":"This document provides comprehensive details about the Ingestion API and Read API layers of the OpenGIN system.","source":"@site/docs/overview/architecture/api-layer-details.md","sourceDirName":"overview/architecture","slug":"/overview/architecture/api-layer-details","permalink":"/OpenGIN/docs/overview/architecture/api-layer-details","draft":false,"unlisted":false,"editUrl":"https://github.com/LDFLK/OpenGIN/tree/main/docs/docs/overview/architecture/api-layer-details.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Data Flow","permalink":"/OpenGIN/docs/overview/architecture/data_flow"},"next":{"title":"Core API","permalink":"/OpenGIN/docs/overview/architecture/core-api"}}');var s=i(4848),r=i(8453);const a={},l="API Layer - Detailed Architecture",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Ingestion API",id:"ingestion-api",level:2},{value:"Overview",id:"overview-1",level:3},{value:"Request/Response Flow",id:"requestresponse-flow",level:3},{value:"CREATE Entity",id:"create-entity",level:4},{value:"READ Entity",id:"read-entity",level:4},{value:"UPDATE Entity",id:"update-entity",level:4},{value:"DELETE Entity",id:"delete-entity",level:4},{value:"Read API",id:"read-api",level:2},{value:"Overview",id:"overview-2",level:3},{value:"Overview",id:"overview-3",level:3},{value:"Read Operations",id:"read-operations",level:3},{value:"Get Metadata",id:"get-metadata",level:4},{value:"Get Relationships",id:"get-relationships",level:4},{value:"Get Attributes",id:"get-attributes",level:4},{value:"Get Entity with Selective Fields",id:"get-entity-with-selective-fields",level:4},{value:"Temporal Queries",id:"temporal-queries",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"api-layer---detailed-architecture",children:"API Layer - Detailed Architecture"})}),"\n",(0,s.jsx)(n.p,{children:"This document provides comprehensive details about the Ingestion API and Read API layers of the OpenGIN system."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The API Layer consists of two Ballerina-based REST services that provide external access to the OpenGIN system:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ingestion API"}),": Handles entity mutations (CREATE, UPDATE, DELETE)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Read API"}),": Handles entity queries and retrieval"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Both APIs act as translation layers between external HTTP/JSON clients and the internal gRPC/Protobuf CORE service."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ingestion-api",children:"Ingestion API"}),"\n",(0,s.jsx)(n.h3,{id:"overview-1",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The Ingestion API serves as the primary gateway for data entering the system. Implemented as a Ballerina REST service, it allows external clients to create, update, and delete entities using standard HTTP methods. The service validates incoming JSON payloads against defined contracts before converting them for internal processing."}),"\n",(0,s.jsx)(n.p,{children:"The Ingestion API serves as the primary gateway for data entering the system. Implemented as a Ballerina REST service, it allows external clients to create, update, and delete entities using standard HTTP methods. The service validates incoming JSON payloads against defined contracts before converting them for internal processing."}),"\n",(0,s.jsx)(n.h3,{id:"requestresponse-flow",children:"Request/Response Flow"}),"\n",(0,s.jsx)(n.h4,{id:"create-entity",children:"CREATE Entity"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'POST /entities\nContent-Type: application/json\n\n{\n  "id": "entity123",\n  "kind": {\n    "major": "Person",\n    "minor": "Employee"\n  },\n  "created": "2024-01-01T00:00:00Z",\n  "name": {\n    "startTime": "2024-01-01T00:00:00Z",\n    "endTime": "",\n    "value": "John Doe"\n  },\n  "metadata": [\n    {"key": "department", "value": "Engineering"},\n    {"key": "role", "value": "Engineer"}\n  ],\n  "attributes": [\n    {\n      "key": "salary",\n      "value": {\n        "values": [\n          {\n            "startTime": "2024-01-01T00:00:00Z",\n            "endTime": "",\n            "value": 100000\n          }\n        ]\n      }\n    }\n  ],\n  "relationships": [\n    {\n      "key": "reports_to",\n      "value": {\n        "id": "rel123",\n        "relatedEntityId": "manager456",\n        "name": "reports_to",\n        "startTime": "2024-01-01T00:00:00Z",\n        "endTime": "",\n        "direction": "outgoing"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "entity123",\n  "kind": {\n    "major": "Person",\n    "minor": "Employee"\n  },\n  "created": "2024-01-01T00:00:00Z",\n  "name": {\n    "startTime": "2024-01-01T00:00:00Z",\n    "value": "John Doe"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"read-entity",children:"READ Entity"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /entities/entity123\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "entity123",\n  "kind": {\n    "major": "Person",\n    "minor": "Employee"\n  },\n  "created": "2024-01-01T00:00:00Z",\n  "name": {\n    "startTime": "2024-01-01T00:00:00Z",\n    "value": "John Doe"\n  },\n  "metadata": [\n    {"key": "department", "value": "Engineering"}\n  ],\n  "attributes": [],\n  "relationships": []\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"update-entity",children:"UPDATE Entity"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'PUT /entities/entity123\nContent-Type: application/json\n\n{\n  "id": "entity123",\n  "kind": {\n    "major": "Person",\n    "minor": "Employee"\n  },\n  "metadata": [\n    {"key": "department", "value": "Sales"}\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "entity123",\n  "kind": {\n    "major": "Person",\n    "minor": "Employee"\n  },\n  "metadata": [\n    {"key": "department", "value": "Sales"}\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"delete-entity",children:"DELETE Entity"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"DELETE /entities/entity123\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"204 No Content\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"read-api",children:"Read API"}),"\n",(0,s.jsx)(n.h3,{id:"overview-2",children:"Overview"}),"\n",(0,s.jsx)(n.h3,{id:"overview-3",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The Read API is dedicated to serving data retrieval requests. Also built with Ballerina, it provides a RESTful interface for querying entities, their metadata, relationships, and attributes. It supports complex queries including time-travel (temporal) lookups and selective field retrieval to optimize performance and payload size."}),"\n",(0,s.jsx)(n.h3,{id:"read-operations",children:"Read Operations"}),"\n",(0,s.jsx)(n.h4,{id:"get-metadata",children:"Get Metadata"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /v1/entities/entity123/metadata\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "metadata": {\n    "department": "Engineering",\n    "role": "Engineer",\n    "employeeId": "EMP-123"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use Case"}),": Retrieve flexible key-value metadata for an entity"]}),"\n",(0,s.jsx)(n.h4,{id:"get-relationships",children:"Get Relationships"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /v1/entities/entity123/relationships?name=reports_to&direction=outgoing\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": Filter by relationship type"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"direction"}),": ",(0,s.jsx)(n.code,{children:"outgoing"})," or ",(0,s.jsx)(n.code,{children:"incoming"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"relatedEntityId"}),": Filter by related entity"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"activeAt"}),": Temporal query (ISO 8601 timestamp)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "relationships": [\n    {\n      "id": "rel123",\n      "name": "reports_to",\n      "relatedEntityId": "manager456",\n      "startTime": "2024-01-01T00:00:00Z",\n      "endTime": null,\n      "direction": "outgoing"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use Case"}),": Graph traversal, finding related entities"]}),"\n",(0,s.jsx)(n.h4,{id:"get-attributes",children:"Get Attributes"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /v1/entities/entity123/attributes?name=salary&activeAt=2024-06-01T00:00:00Z\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": Filter by attribute name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"activeAt"}),": Get attribute value at specific time"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "attributes": {\n    "salary": {\n      "values": [\n        {\n          "startTime": "2024-01-01T00:00:00Z",\n          "endTime": "2024-06-30T23:59:59Z",\n          "value": 100000\n        },\n        {\n          "startTime": "2024-07-01T00:00:00Z",\n          "endTime": null,\n          "value": 110000\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use Case"}),": Time-series data, historical attribute values"]}),"\n",(0,s.jsx)(n.h4,{id:"get-entity-with-selective-fields",children:"Get Entity with Selective Fields"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /v1/entities/entity123?output=metadata,relationships\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Query Parameters"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"output"}),": Comma-separated list of fields to retrieve","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Options: ",(0,s.jsx)(n.code,{children:"metadata"}),", ",(0,s.jsx)(n.code,{children:"relationships"}),", ",(0,s.jsx)(n.code,{children:"attributes"})]}),"\n",(0,s.jsx)(n.li,{children:"If omitted: returns only basic entity info"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "entity123",\n  "kind": {\n    "major": "Person",\n    "minor": "Employee"\n  },\n  "name": {\n    "value": "John Doe",\n    "startTime": "2024-01-01T00:00:00Z"\n  },\n  "created": "2024-01-01T00:00:00Z",\n  "metadata": {\n    "department": "Engineering"\n  },\n  "relationships": [\n    {\n      "name": "reports_to",\n      "relatedEntityId": "manager456"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use Case"}),": Optimized queries, reduce payload size"]}),"\n",(0,s.jsx)(n.h3,{id:"temporal-queries",children:"Temporal Queries"}),"\n",(0,s.jsxs)(n.p,{children:["The Read API supports temporal queries using the ",(0,s.jsx)(n.code,{children:"activeAt"})," parameter:"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),": Get employee's salary on specific date"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /v1/entities/entity123/attributes?name=salary&activeAt=2024-03-15T00:00:00Z\n"})}),"\n",(0,s.jsx)(n.p,{children:"This returns only the attribute value that was active on March 15, 2024."}),"\n",(0,s.jsx)(n.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Selective Field Retrieval"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Only fetch requested fields from CORE service"}),"\n",(0,s.jsx)(n.li,{children:"Reduces database load"}),"\n",(0,s.jsx)(n.li,{children:"Reduces network bandwidth"}),"\n",(0,s.jsx)(n.li,{children:"Faster response times"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Query: GET /v1/entities/entity123?output=metadata\n\nInstead of:\n  \u251c\u2500 MongoDB (metadata)         \u2713 Retrieved\n  \u251c\u2500 Neo4j (entity info)        \u2713 Retrieved\n  \u251c\u2500 Neo4j (relationships)      \u2717 Skipped\n  \u2514\u2500 PostgreSQL (attributes)    \u2717 Skipped\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/OpenGIN/docs/overview/architecture/",children:"Main Architecture Overview"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/OpenGIN/docs/overview/architecture/api-layer-details",children:"Service APIs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/OpenGIN/docs/overview/architecture/core-api",children:"Core API"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>l});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);